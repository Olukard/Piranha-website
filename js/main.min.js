$(document).ready((function(){console.log("все готово!");var e=$(".modal"),o=$("[data-toggle=modal]"),s=$(".modal__close"),a=$(".success"),r=$(".success__close");o.on("click",(function(){e.toggleClass("modal--visible")})),s.on("click",(function(){e.toggleClass("modal--visible")})),r.on("click",(function(){a.toggleClass("success--visible")})),$(document).keydown((function(o){"Escape"==o.code&&e.removeClass("modal--visible")})),$(document).on("click",(function(o){e.is(o.target)&&e.removeClass("modal--visible")})),$(document).keydown((function(e){"Escape"==e.code&&a.removeClass("success--visible")})),$(document).on("click",(function(e){a.is(e.target)&&a.removeClass("success--visible")}));new Swiper(".swiper-container",{spaceBetween:100,slidePerView:1,slidePerGroup:1,normalizeSlideIndex:1,speed:1e3,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:"true"}});$("#modal-form").validate({errorClass:"form__invalid",errorElement:"div",rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:17},userQuestion:"required",policyCheckbox:{required:!0},userEmail:{required:!0,email:!0}},messages:{userName:{required:"Имя обязательно",minlength:jQuery.validator.format("Имя не короче {0} букв!"),maxlength:jQuery.validator.format("Имя не длиннее {0} букв!")},userPhone:"Телефон обязателен",userQuestion:"Задайте свой вопрос",policyCheckbox:"Отметьте, чтобы продолжить",userEmail:{required:"Обязательно укажите email",email:"Введите в формате: name@domain.com"}},submitHandler:function(o){$.ajax({type:"POST",url:"send.php",data:$(o).serialize(),success:function(s){console.log("Ajax сработал! Ответ сервера:"+s),$(o)[0].reset(),e.removeClass("modal--visible"),a.toggleClass("success--visible")},error:function(e){console.error("Ajax НЕ сработал! Ответ сервера: "+e)}})}}),$("[type=tel]").mask("+7(000) 000-00-00",{placeholder:"+7(xxx) xxx-xx-xx"}),$((function(){$("a[href^='#']").click((function(){var e=$(this).attr("href");return $("html, body").animate({scrollTop:$(e).offset().top+-80+"px"}),!1}))}));var i=!1;$(window).scroll((function(){if(!i&&$(window).scrollTop()+$(window).height()>$(document).height()-1400){var e=document.createElement("script");e.src="https://api-maps.yandex.ru/2.1-dev/?apikey=057df9fb-aaa6-46cb-8eb2-f64b1c607492&lang=ru_RU",$("body").after(e),setTimeout((function(){ymaps.ready((function(){var e=new ymaps.Map("map",{center:[55.76,37.64],zoom:10},{searchControlProvider:"yandex#search"}),o=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0});o.objects.options.set("preset","islands#greenDotIcon"),o.clusters.options.set("preset","islands#greenClusterIcons"),e.geoObjects.add(o),$.ajax({url:"data.json"}).done((function(e){o.add(e)}))}))}),1e3),i=!0}})),$(".header__burger").click((function(e){$(".header__burger, .header__menu").toggleClass("active"),$("body").toggleClass("lock"),$(".header__link, .header__logo-link").click((function(e){$(".header__burger, .header__menu").removeClass("active"),$("body").removeClass("lock")}))}))}));